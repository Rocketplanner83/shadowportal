:root{--bg:#0b1220;--card:#0f1a2b;--muted:#93a4bf;--text:#e7eefc;--accent:#3b82f6;--danger:#ef4444;--ok:#22c55e;}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:var(--bg);color:var(--text);}
body.light{--bg:#f6f7fb;--card:#ffffff;--text:#0b1220;--muted:#60708a;}

.sticky{position:sticky;top:0;z-index:10;background:rgba(11,18,32,.92);backdrop-filter:blur(10px);padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.08);}
.brand{display:flex;align-items:center;justify-content:space-between;gap:12px;}
h1{margin:0;font-size:18px;}
.container{max-width:1100px;margin:0 auto;padding:16px;}
.controls{display:flex;gap:8px;align-items:center;margin-top:10px;}

.input, input{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);color:var(--text);padding:10px;border-radius:10px;min-width:220px;}
.btn{background:var(--accent);border:none;color:white;padding:10px 12px;border-radius:10px;cursor:pointer;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;}
.btn.danger{background:var(--danger);}
.link{color:var(--accent);text-decoration:none;}

.userpill{font-size:12px;color:var(--muted);display:flex;gap:8px;align-items:center;}
.userpill .role{background:rgba(255,255,255,.08);padding:2px 8px;border-radius:999px;color:var(--text);}

.pool-group{background:var(--card);border-radius:16px;margin:12px 0;box-shadow:0 10px 25px rgba(0,0,0,.15);overflow:hidden;}
.pool-header{display:flex;justify-content:space-between;align-items:center;padding:14px 14px;cursor:pointer;border-bottom:1px solid rgba(255,255,255,.06);}
.pool-left{display:flex;gap:10px;align-items:center;}
.pool-name{font-weight:700;}
.chev{color:var(--muted);}

.pool-content{overflow:hidden;max-height:4000px;transition:max-height .28s ease;}
.pool-content.collapsed{max-height:0;}

.dataset-row{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.06);}
.dataset-name{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:13px;flex:1;}
.dataset-badges{display:flex;gap:6px;flex-wrap:wrap;justify-content:flex-end;}

.badge{padding:4px 8px;border-radius:999px;background:rgba(59,130,246,.18);color:#cfe0ff;border:1px solid rgba(59,130,246,.25);font-size:12px;}
.badge.muted{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.08);color:var(--muted);}

.health{padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid rgba(255,255,255,.10);}
.health.online{background:rgba(34,197,94,.16);color:#bff2ce;border-color:rgba(34,197,94,.25);}
.health.degraded{background:rgba(250,204,21,.16);color:#fff3b0;border-color:rgba(250,204,21,.25);}
.health.faulted{background:rgba(239,68,68,.16);color:#ffc7c7;border-color:rgba(239,68,68,.25);}
.health.unknown{background:rgba(255,255,255,.06);color:var(--muted);}

.page-title{margin:6px 0 12px 0;}
.toolbar{display:flex;justify-content:space-between;align-items:center;margin:10px 0 12px 0;}
.hint{color:var(--muted);font-size:12px;}

.snapshot-card{background:var(--card);border-radius:16px;margin:10px 0;overflow:hidden;box-shadow:0 10px 25px rgba(0,0,0,.12);}
.snapshot-row{display:flex;align-items:center;gap:10px;padding:12px 14px;cursor:pointer;border-bottom:1px solid rgba(255,255,255,.06);}
.snap-name{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:13px;flex:1;}

.snapshot-detail{max-height:0;overflow:hidden;transition:max-height .25s ease;padding:0 14px;}
.snapshot-detail.open{max-height:650px;padding:12px 14px;}

.actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;}
.muted{color:var(--muted);font-size:12px;}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;}
.small{font-size:11px;}

.snapshot-card.pending{opacity:.7;filter:saturate(.8);}
.op-status{margin-top:10px;color:var(--muted);font-size:12px;}

.check{display:inline-flex;align-items:center;}
.check input{display:none;}
.check span{width:18px;height:18px;border-radius:6px;border:1px solid rgba(255,255,255,.18);display:inline-block;position:relative;}
.check input:checked + span{background:rgba(59,130,246,.35);border-color:rgba(59,130,246,.65);}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;padding:18px;}
.modal.hidden{display:none;}
.modal-card{background:var(--card);border-radius:18px;max-width:520px;width:100%;padding:16px;border:1px solid rgba(255,255,255,.10);box-shadow:0 18px 40px rgba(0,0,0,.4);}
.modal-title{font-weight:800;margin-bottom:10px;}
.modal-body{color:var(--text);margin-bottom:14px;}
.modal-actions{display:flex;justify-content:flex-end;gap:10px;}

#modalConfirm.danger-high{background:var(--danger);}
#modalConfirm.danger-medium{background:rgba(239,68,68,.85);}
#modalConfirm.danger-low{background:var(--accent);}

.center{display:flex;align-items:center;justify-content:center;min-height:100vh;}
.login-card{background:var(--card);padding:20px;border-radius:18px;max-width:420px;width:100%;box-shadow:0 18px 40px rgba(0,0,0,.25);}
.error{color:#ffc7c7;background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.22);padding:10px;border-radius:12px;margin-top:12px;}

.diff-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px;}
.diff-col{background:var(--card);border-radius:16px;padding:12px;border:1px solid rgba(255,255,255,.06);}
.diff-list{list-style:none;padding-left:0;margin:0;max-height:480px;overflow:auto;}
.diff-list li{padding:6px 8px;border-radius:10px;margin:6px 0;font-size:12px;}
.diff-list li.added{background:rgba(34,197,94,.12);border:1px solid rgba(34,197,94,.18);}
.diff-list li.removed{background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.18);}
.diff-list li.modified{background:rgba(250,204,21,.12);border:1px solid rgba(250,204,21,.18);}

.audit{width:100%;border-collapse:collapse;background:var(--card);border-radius:16px;overflow:hidden;}
.audit th,.audit td{border-bottom:1px solid rgba(255,255,255,.06);padding:10px;font-size:12px;vertical-align:top;}
.audit th{text-align:left;color:var(--muted);font-weight:700;}

@media (max-width: 900px){
  .diff-grid{grid-template-columns:1fr;}
  .controls{flex-wrap:wrap;}
  .dataset-row{flex-wrap:wrap;}
}